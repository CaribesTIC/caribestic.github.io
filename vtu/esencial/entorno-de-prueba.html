<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Entorno de prueba | Vue(tdd)</title>
    <meta name="description" content="TDD con Vue 3.">
    <link rel="stylesheet" href="/vue-tdd/assets/style.c3210e46.css">
    <link rel="modulepreload" href="/vue-tdd/assets/app.1accdd67.js">
    <link rel="modulepreload" href="/vue-tdd/assets/vtu_esencial_entorno-de-prueba.md.d9f22009.lean.js">
    
    <meta name="twitter:title" content="Entorno de prueba | Vue(tdd)">
  <meta property="og:title" content="Entorno de prueba | Vue(tdd)">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/vue-tdd/" aria-label="Vue(tdd), back to home" data-v-675d8756 data-v-cc01ef16><img class="logo" src="/vue-tdd/logo.png" alt="Logo" data-v-cc01ef16> Vue(tdd)</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/vue-tdd/" data-v-b8818f8c>Home <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/vue-tdd/comenzar/tdd" data-v-b8818f8c>Guide <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/CaribesTIC/vue-tdd" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/vue-tdd/" data-v-b8818f8c>Home <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/vue-tdd/comenzar/tdd" data-v-b8818f8c>Guide <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/CaribesTIC/vue-tdd" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">Comenzar</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/comenzar/tdd">Desarrollo Dirigido por Pruebas</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/comenzar/pruebas-unitarias">Pruebas Unitarias</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Vitest</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vitest/porque-vitest">¿Por qué Vitest?</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vitest/entorno-de-prueba">Entorno de Prueba</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vitest/comparadores">Comparadores</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vitest/codigo-asincrono">Código Asíncrono</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vitest/configuracion-y-desmontaje">Configuración y Desmontaje</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vitest/funciones-simuladas">Funciones Simuladas</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Vue Tests Utils</p><ul class="sidebar-links"><li class="sidebar-link"><p class="sidebar-link-item">Esencial</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/esencial/intro">¿Qué es Vue Test Utils?</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/vue-tdd/vtu/esencial/entorno-de-prueba">Entorno de Prueba</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#instalar-vue-tests-utils">Instalar Vue Tests Utils</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#escribamos-la-primera-prueba">Escribamos la primera prueba</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#escribir-la-prueba">Escribir la Prueba</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ejecutando-la-prueba">Ejecutando la prueba</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#hacer-afirmaciones">Hacer afirmaciones</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#uso-de-vue-3-y-la-composition-api">Uso de Vue 3 y la Composition API</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#script-setup">Script Setup</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#¿que-sigue">¿Qué Sigue?</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/esencial/un-curso-acelerado">Un Curso Acelerado</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/esencial/renderizado-condicional">Renderizado Condicional</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/esencial/manejo-de-eventos">Probando el Manejo de Eventos</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/esencial/formularios">Probando Formularios</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/esencial/pasando-datos-a-componentes">Pasando Datos a Componentes</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/esencial/escribir-componentes-que-sean faciles-de-probar">Escribir componentes que sean fáciles de probar</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Vue Test Utils en-profundidad</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/vue-test-utils-en-profundidad/ranuras">Ranuras</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/vue-test-utils-en-profundidad/comportamiento-asincrono">Comportamiento Asíncrono</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/vue-test-utils-en-profundidad/solicitudes-http">Realizando Solicitudes HTTP</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/vue-test-utils-en-profundidad/transiciones">Transiciones</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/vue-test-utils-en-profundidad/instancia-de-componente">Instancia de Componente</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/vue-test-utils-en-profundidad/reusabilidad-y-composicion">Reusabilidad &amp; Composición</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/vue-test-utils-en-profundidad/probando-vuex">Probando Vuex</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/vue-test-utils-en-profundidad/un-poco-mas-sobre-vuex">Un poco más sobre Vuex</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/vue-test-utils-en-profundidad/probando-vue-router">Probando Vue Router</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/vue-test-utils-en-profundidad/probando-teleport">Probando Teleport</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/vue-test-utils-en-profundidad/talones-y-montaje-superficial">Talones y Montaje Superficial</a><!----></li></ul></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Vue Testing Handbook</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/renderizar-componentes">Renderizar Componentes</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/probando-propiedades">Probando Propiedades</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/propiedades-calculadas">Propiedades Calculadas</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/simulando-la-entrada-del-usuario">Simulando la entrada del usuario</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/probando-eventos-emitidos">Probando Eventos Emitidos</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/simulando-objetos-globales">Simulando Objetos Globales</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/talonando-componentes">Talonando Componentes</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/encontrando-elementos-y-componentes">Encontrando elementos y componentes</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/probando-vuex">Probando Vuex</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/vuex-mutaciones">Vuex Mutaciones</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/vuex-acciones">Vuex Accciones</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/vuex-captadores">Vuex Captadores</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/probando-vuex-en-componentes">Probando Vuex en componentes - estados y captadores</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/probando-vuex-en-componentes-mutaciones-y-acciones">Probando Vuex en componentes - mutaciones y acciones</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/vue-router">Vue Router</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Vue Testing Library</p><ul class="sidebar-links"><li class="sidebar-link"><p class="sidebar-link-item">documentacion</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtl/documentacion/intro">¿Qué es Vue Testing Library?</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Diseño Dirigido por Pruebas</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtl/ddp/intro">Introducción</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtl/ddp/patrones-para-probar-accesorios">Patrones para Probar Accesorios</a><!----></li></ul></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="entorno-de-prueba" tabindex="-1">Entorno de prueba <a class="header-anchor" href="#entorno-de-prueba" aria-hidden="true">#</a></h1><h2 id="instalar-vue-tests-utils" tabindex="-1">Instalar Vue Tests Utils <a class="header-anchor" href="#instalar-vue-tests-utils" aria-hidden="true">#</a></h2><p>Una vez creado el proyecto con <a href="./../../vitest/entorno-de-prueba.html#crear-proyecto-con-vite">Vite</a> y haber instalado <a href="./../../vitest/entorno-de-prueba.html#instalar-vitest">Vitest</a> hay que ejecutar la siguiente línea de comando para así instalar <a href="https://test-utils.vuejs.org/installation/" target="_blank" rel="noopener noreferrer">Vue Tests Utils</a></p><div class="language-"><pre><code>npm i -D @vue/test-utils@next
</code></pre></div><p>Así de fácil, ahora, Escribamos la primera prueba a un componente Vue.</p><h2 id="escribamos-la-primera-prueba" tabindex="-1">Escribamos la primera prueba <a class="header-anchor" href="#escribamos-la-primera-prueba" aria-hidden="true">#</a></h2><p>Ensuciémonos las manos, escribiendo nuestro propio componente y una prueba. Tradicionalmente, al hacer TDD, primero escribe la prueba fallida y luego implementa el código que permite que pase la prueba. Por ahora, escribiremos primero el componente.</p><p>Creando el componente Greeting</p><p>Cree un archivo <code>Greeting.vue</code> en <code>src/components</code>. Dentro de <code>Greeting.vue</code>, agregue lo siguiente:</p><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    {{ greeting }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Greeting&quot;</span><span class="token punctuation">,</span>

  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">greeting</span><span class="token operator">:</span> <span class="token string">&quot;Vue and TDD&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="escribir-la-prueba" tabindex="-1">Escribir la Prueba <a class="header-anchor" href="#escribir-la-prueba" aria-hidden="true">#</a></h2><p><code>Greeting</code> tiene una sola responsabilidad: representar el valor de <code>greeting</code>. La estrategia será:</p><ol><li>Renderizar el componente con <code>mount</code></li><li>Afirmar que el texto del componente contiene &quot;Vue y TDD&quot;</li></ol><p>Cree un <code>Greeting.spec.js</code> dentro de <code>tests/unit</code>. En el interior, importe <code>Greeting.vue</code>, así como <code>mount</code>, y agregue el trazado de la prueba:</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mount <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@vue/test-utils&#39;</span>
<span class="token keyword">import</span> Greeting <span class="token keyword">from</span> <span class="token string">&#39;@/components/Greeting.vue&#39;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#39;Greeting.vue&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#39;renders a greeting&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Hay diferentes sintaxis usadas para TDD, usaremos la sintaxis de <code>describe</code> e <code>it</code> comúnmente que viene con Vitest. <code>describe</code> generalmente describe de qué se trata la prueba, en este caso <code>Greeting.vue</code>. Representa una sola responsabilidad que debe cumplir el sujeto de la prueba. A medida que agregamos más funciones al componente, agregamos más bloques <code>it</code>.</p><p>Ahora deberíamos renderizar el componente con <code>mount</code>. La práctica estándar es asignar el componente a una variable llamada <code>wrapper</code>. También imprimiremos la salida, para asegurarnos de que todo funciona correctamente:</p><div class="language-js"><div class="highlight-lines"><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mount <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@vue/test-utils&#39;</span>
<span class="token keyword">import</span> Greeting <span class="token keyword">from</span> <span class="token string">&#39;@/components/Greeting.vue&#39;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#39;Greeting.vue&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#39;renders a greeting&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  
    <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">mount</span><span class="token punctuation">(</span>Greeting<span class="token punctuation">)</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="ejecutando-la-prueba" tabindex="-1">Ejecutando la prueba <a class="header-anchor" href="#ejecutando-la-prueba" aria-hidden="true">#</a></h2><p>Ejecute la prueba escribiendo <code>npm run test</code> en su terminal. Cualquier archivo en el directorio de pruebas que termine con <code>.spec.js</code> o <code>.test.js</code> se ejecuta automáticamente. Si todo ha ido bien, deberías ver:</p><div class="language-"><pre><code>&lt;div&gt;Vue and TDD&lt;/div&gt;

 √ tests/unit/Greeting.spec.js (1)

Test Files  1 passed (1)
     Tests  1 passed (1)
      Time  6.28s (in thread 16ms, 39195.30%)
</code></pre></div><p>Podemos ver que el marcado es correcto y la prueba pasa. La prueba pasa porque no hubo fallas; esta prueba nunca puede fallar, por lo que aún no es muy útil. Incluso si cambiamos <code>Greeting.vue</code> y eliminamos <code>greeting</code> de la plantilla, seguirá pasando. Cambiemos eso.</p><h2 id="hacer-afirmaciones" tabindex="-1">Hacer afirmaciones <a class="header-anchor" href="#hacer-afirmaciones" aria-hidden="true">#</a></h2><p>Necesitamos hacer una afirmación para asegurarnos de que el componente se comporta correctamente. Podemos hacer eso usando <code>expect</code> de la API de Vitest. Tiene este aspecto: <code>expect(result).to [matcher] (actual)</code>.</p><p><a href="./../../vitest/comparadores.html">Los comparadores</a> son métodos para comparar valores y objetos. Por ejemplo:</p><div class="language-js"><pre><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><p>Una lista completa de comparadores está disponible en la <a href="https://vitest.dev/api/#expect" target="_blank" rel="noopener noreferrer">documentación de Vitest</a>. <code>vue-test-utils</code> no incluye ningún comparador - los que proporciona Vitest son más que suficientes. Queremos comparar el texto de <code>Greeting</code>. Podríamos escribir:</p><div class="language-js"><pre><code><span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&quot;Vue and TDD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
</code></pre></div><p>Pero <code>vue-test-utils</code> tiene una forma aún mejor de obtener el marcado: <code>wrapper.text</code>. Terminemos la prueba:</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mount <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@vue/test-utils&#39;</span>
<span class="token keyword">import</span> Greeting <span class="token keyword">from</span> <span class="token string">&#39;@/components/Greeting.vue&#39;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#39;Greeting.vue&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#39;renders a greeting&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">mount</span><span class="token punctuation">(</span>Greeting<span class="token punctuation">)</span>

    <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatch</span><span class="token punctuation">(</span><span class="token string">&quot;Vue and TDD&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Ya no necesitamos el ningún <code>console.log</code>, por lo que puede eliminarlo. Ejecute las pruebas con <code>npm run test</code>, y si todo salió bien, debería obtener:</p><div class="language-"><pre><code> √ tests/unit/Greeting.spec.js (1)

Test Files  1 passed (1)
     Tests  1 passed (1)
      Time  12ms
</code></pre></div><p>Luciendo bien. Pero siempre debe ver que una prueba falla y luego pasa, para asegurarse de que realmente funciona. En TDD tradicional, escribiría la prueba antes de la implementación real, vería que falla y luego usaría los errores fallidos para guiar su código. Asegurémonos de que esta prueba realmente funcione. Actualizar <code>Greeting.vue</code>:</p><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    {{ greeting }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Greeting&quot;</span><span class="token punctuation">,</span>

  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">greeting</span><span class="token operator">:</span> <span class="token string">&quot;Vue without TDD&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Y ahora ejecuta la prueba con <code>npm run test</code>:</p><div class="language-"><pre><code>FAIL  tests/unit/Greeting.spec.js &gt; Greeting.vue &gt; renders a greeting
AssertionError: expected &#39;Vue without TDD&#39; to include &#39;Vue and TDD&#39;
 ❯ tests/test.test.js:9:28
      7|     const wrapper = mount(Greeting)
      8|     
      9|     expect(wrapper.text()).toMatch(&quot;Vue and TDD&quot;)
       |                            ^
     10|   })
     11| })

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/1]⎯

Test Files  1 failed (1)
     Tests  1 failed (1)
      Time  14ms
</code></pre></div><p>Vitest nos da buenos comentarios. Podemos ver el resultado esperado y el real, así como en qué línea falló la expectativa. La prueba falló, como se esperaba. Revierta <code>Greeting.vue</code> y asegúrese de que la prueba vuelva a pasar.</p><h2 id="uso-de-vue-3-y-la-composition-api" tabindex="-1">Uso de Vue 3 y la <em>Composition API</em> <a class="header-anchor" href="#uso-de-vue-3-y-la-composition-api" aria-hidden="true">#</a></h2><p>Vue 3 agrega otra API para crear componentes: la <em>Composition API</em>. Una señal de una buena prueba es que evitamos probar los detalles de implementación (cómo funciona el código), sino que nos enfocamos en el comportamiento (lo que hace el código). Refactoricemos el componente anterior y veamos qué sucede. Si la prueba aún pasa, sabemos que está probando las cosas correctas. Si falla, podríamos estar probando un detalle de implementación.</p><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    {{ greeting }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Greeting&#39;</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> greeting <span class="token operator">=</span> <span class="token string">&#39;Vue and TDD&#39;</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      greeting<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Al comenzar con la <em>Composition API</em>, a menudo se olvida de agregar la variable a la devolución. Intente omitir esto y vea cómo falla la prueba. Si planea convertir algunos de los componentes de la <em>Options API</em> a la <em>Composition API</em>, algunas pruebas pueden brindarle confianza y proporcionar un ciclo de retroalimentación positiva durante la refactorización.</p><h2 id="script-setup" tabindex="-1"><em>Script Setup</em> <a class="header-anchor" href="#script-setup" aria-hidden="true">#</a></h2><p>Agreguemos una refactorización más llevando <code>Greeting.vue</code> a <code>&lt;script setup&gt;</code>:</p><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> greeting <span class="token operator">=</span> <span class="token string">&#39;Vue and TDD&#39;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    {{ greeting }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="¿que-sigue" tabindex="-1">¿Qué Sigue? <a class="header-anchor" href="#¿que-sigue" aria-hidden="true">#</a></h2><p>Para ver Vue Test Utils en acción, realice el Curso Acelerado, donde construimos una aplicación sencilla de Todo utilizando un enfoque de prueba primero.</p><p>Los documentos se dividen en dos secciones principales:</p><ul><li><strong>Esenciales</strong>, para cubrir los casos de uso comunes que enfrentará al probar los componentes de Vue.</li><li><strong>Vue Test Utils en Profundidad</strong>, para explorar otras funciones avanzadas de la biblioteca.</li></ul><p>También puede explorar la <a href="https://test-utils.vuejs.org/api/" target="_blank" rel="noopener noreferrer">API</a> completa.</p><p>Alternativamente, si prefiere aprender a través de video, hay <a href="https://www.youtube.com/playlist?list=PLC2LZCNWKL9ahK1IoODqYxKu5aA9T5IOA" target="_blank" rel="noopener noreferrer">una serie de conferencias disponibles aquí</a>.</p></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-07c132fc><div class="edit" data-v-07c132fc><div class="edit-link" data-v-07c132fc data-v-1ed99556><!----></div></div><div class="updated" data-v-07c132fc><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/vue-tdd/vtu/esencial/intro" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>¿Qué es Vue Test Utils?</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/vue-tdd/vtu/esencial/un-curso-acelerado" data-v-38ede35f><span class="text" data-v-38ede35f>Un Curso Acelerado</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"comenzar_pruebas-unitarias.md\":\"6b8f9362\",\"comenzar_tdd.md\":\"6ffaf709\",\"index.md\":\"4edc9b1c\",\"vitest_codigo-asincrono.md\":\"8fe38cf3\",\"vitest_comparadores.md\":\"b06a9b2f\",\"vitest_configuracion-y-desmontaje.md\":\"14aff607\",\"vitest_entorno-de-prueba.md\":\"f9292d0a\",\"vitest_funciones-simuladas.md\":\"2d1fb67d\",\"vitest_porque-vitest.md\":\"8969b1bf\",\"vth_encontrando-elementos-y-componentes.md\":\"e08c1764\",\"vth_probando-eventos-emitidos.md\":\"a0e64c97\",\"vth_probando-propiedades.md\":\"aeedca0d\",\"vth_probando-vuex-en-componentes-mutaciones-y-acciones.md\":\"f522ceac\",\"vth_probando-vuex-en-componentes.md\":\"2edcb15c\",\"vth_probando-vuex.md\":\"660d14c9\",\"vth_propiedades-calculadas.md\":\"41851911\",\"vth_renderizar-componentes.md\":\"2c0d1160\",\"vth_simulando-la-entrada-del-usuario.md\":\"ac3e0d67\",\"vth_simulando-objetos-globales.md\":\"2a5da7a6\",\"vth_talonando-componentes.md\":\"50109662\",\"vth_vue-router.md\":\"09dd9826\",\"vth_vuex-acciones.md\":\"796ca8d6\",\"vth_vuex-captadores.md\":\"459c2f81\",\"vth_vuex-mutaciones.md\":\"5c1c93e6\",\"vtl_ddp_intro.md\":\"f59f3d1b\",\"vtl_ddp_patrones-para-probar-accesorios.md\":\"fcad50c4\",\"vtl_documentacion_intro.md\":\"f63e0a63\",\"vtu_esencial_entorno-de-prueba.md\":\"d9f22009\",\"vtu_esencial_escribir-componentes-que-sean faciles-de-probar.md\":\"8836bd9e\",\"vtu_esencial_formularios.md\":\"0776e737\",\"vtu_esencial_intro.md\":\"e2a006a5\",\"vtu_esencial_manejo-de-eventos.md\":\"5b904c11\",\"vtu_esencial_pasando-datos-a-componentes.md\":\"bb8d4303\",\"vtu_esencial_renderizado-condicional.md\":\"c28ebf1e\",\"vtu_esencial_un-curso-acelerado.md\":\"5925dfdc\",\"vtu_vue-test-utils-en-profundidad_comportamiento-asincrono.md\":\"e93e3e36\",\"vtu_vue-test-utils-en-profundidad_instancia-de-componente.md\":\"5c831512\",\"vtu_vue-test-utils-en-profundidad_probando-teleport.md\":\"b9f9d625\",\"vtu_vue-test-utils-en-profundidad_probando-vue-router.md\":\"d9f3d340\",\"vtu_vue-test-utils-en-profundidad_probando-vuex.md\":\"79d1af7e\",\"vtu_vue-test-utils-en-profundidad_ranuras.md\":\"4331a1f9\",\"vtu_vue-test-utils-en-profundidad_reusabilidad-y-composicion.md\":\"4495448f\",\"vtu_vue-test-utils-en-profundidad_solicitudes-http.md\":\"3af386ce\",\"vtu_vue-test-utils-en-profundidad_talones-y-montaje-superficial.md\":\"5cc48f86\",\"vtu_vue-test-utils-en-profundidad_transiciones.md\":\"9a8ab142\",\"vtu_vue-test-utils-en-profundidad_un-poco-mas-sobre-vuex.md\":\"3bbf1445\"}")</script>
    <script type="module" async src="/vue-tdd/assets/app.1accdd67.js"></script>
    
  </body>
</html>