<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Funciones Simuladas | Vue(tdd)</title>
    <meta name="description" content="TDD con Vue 3.">
    <link rel="stylesheet" href="/vue-tdd/assets/style.c3210e46.css">
    <link rel="modulepreload" href="/vue-tdd/assets/app.bbdf5da0.js">
    <link rel="modulepreload" href="/vue-tdd/assets/vitest_funciones-simuladas.md.64860787.lean.js">
    
    <meta name="twitter:title" content="Funciones Simuladas | Vue(tdd)">
  <meta property="og:title" content="Funciones Simuladas | Vue(tdd)">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/vue-tdd/" aria-label="Vue(tdd), back to home" data-v-675d8756 data-v-cc01ef16><img class="logo" src="/vue-tdd/logo.png" alt="Logo" data-v-cc01ef16> Vue(tdd)</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/vue-tdd/" data-v-b8818f8c>Home <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/vue-tdd/comenzar/tdd" data-v-b8818f8c>Guide <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/CaribesTIC/vue-tdd" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/vue-tdd/" data-v-b8818f8c>Home <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/vue-tdd/comenzar/tdd" data-v-b8818f8c>Guide <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/CaribesTIC/vue-tdd" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">Comenzar</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/comenzar/tdd">Desarrollo Dirigido por Pruebas</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/comenzar/pruebas-unitarias">Pruebas Unitarias</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Vitest</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vitest/porque-vitest">¿Por qué Vitest?</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vitest/entorno-de-prueba">Entorno de Prueba</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vitest/usando-comparadores">Usando Comparadores</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vitest/probando-codigo-asincrono">Probando Código Asíncrono</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vitest/configuracion-y-desmontaje">Configuración y Desmontaje</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/vue-tdd/vitest/funciones-simuladas">Funciones Simuladas</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#usando-una-funcion-simulada">Usando una función simulada</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#propiedad-mock">Propiedad .mock</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#valores-de-retorno-simulados">Valores de Retorno Simulados</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#modulos-simulados">Módulos Simulados</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#simulaciones-parciales">Simulaciones Parciales</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#implementaciones-simuladas">Implementaciones Simuladas</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#nombres-simulados">Nombres Simulados</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#comparadores-personalizados">Comparadores Personalizados</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vitest/un-ejemplo-asincrono">Un Ejemplo Asíncrono</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vitest/simulaciones-de-temporizador">Simulaciones de Temporizador</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Vue Tests Utils</p><ul class="sidebar-links"><li class="sidebar-link"><p class="sidebar-link-item">Esencial</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/esencial/intro">¿Qué es Vue Test Utils?</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/esencial/entorno-de-prueba">Entorno de Prueba</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/esencial/un-curso-acelerado">Un Curso Acelerado</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/esencial/renderizado-condicional">Renderizado Condicional</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/esencial/manejo-de-eventos">Probando el Manejo de Eventos</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/esencial/formularios">Probando Formularios</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/esencial/pasando-datos-a-componentes">Pasando Datos a Componentes</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/esencial/escribir-componentes-que-sean faciles-de-probar">Escribir componentes que sean fáciles de probar</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Vue Test Utils en-profundidad</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/vue-test-utils-en-profundidad/ranuras">Ranuras</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/vue-test-utils-en-profundidad/comportamiento-asincrono">Comportamiento Asíncrono</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/vue-test-utils-en-profundidad/solicitudes-http">Realizando Solicitudes HTTP</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/vue-test-utils-en-profundidad/transiciones">Transiciones</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/vue-test-utils-en-profundidad/instancia-de-componente">Instancia de Componente</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/vue-test-utils-en-profundidad/reusabilidad-y-composicion">Reusabilidad &amp; Composición</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/vue-test-utils-en-profundidad/probando-vuex">Probando Vuex</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/vue-test-utils-en-profundidad/un-poco-mas-sobre-vuex">Un poco más sobre Vuex</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/vue-test-utils-en-profundidad/probando-vue-router">Probando Vue Router</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/vue-test-utils-en-profundidad/probando-teleport">Probando Teleport</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtu/vue-test-utils-en-profundidad/talones-y-montaje-superficial">Talones y Montaje Superficial</a><!----></li></ul></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Vue Testing Handbook</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/renderizar-componentes">Renderizar Componentes</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/probando-propiedades">Probando Propiedades</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/propiedades-calculadas">Propiedades Calculadas</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/simulando-la-entrada-del-usuario">Simulando la entrada del usuario</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/probando-eventos-emitidos">Probando Eventos Emitidos</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/simulando-objetos-globales">Simulando Objetos Globales</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/talonando-componentes">Talonando Componentes</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/encontrando-elementos-y-componentes">Encontrando elementos y componentes</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/probando-vuex">Probando Vuex</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/vuex-mutaciones">Vuex Mutaciones</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/vuex-acciones">Vuex Accciones</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/vuex-captadores">Vuex Captadores</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/probando-vuex-en-componentes">Probando Vuex en componentes - estados y captadores</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/probando-vuex-en-componentes-mutaciones-y-acciones">Probando Vuex en componentes - mutaciones y acciones</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/vue-router">Vue Router</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/api-de-composicion">API de Composición</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vth/reduciendo-repetitividad-en-las-pruebas">Reduciendo Repetitividad en las Pruebas</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Vue Testing Library</p><ul class="sidebar-links"><li class="sidebar-link"><p class="sidebar-link-item">Documentación</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtl/documentacion/intro">¿Qué es Testing Library?</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtl/documentacion/guias-de-principios">Guías de Principios</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtl/documentacion/intro-v">¿Qué es Vue Testing Library?</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtl/documentacion/ejemplos">Ejemplos</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Diseño Dirigido por Pruebas</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtl/ddp/intro">Introducción</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/vtl/ddp/patrones-para-probar-accesorios">Patrones para Probar Accesorios</a><!----></li></ul></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Pinia</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-tdd/pinia/probando-pinia">Probando Pinia</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="funciones-simuladas" tabindex="-1">Funciones Simuladas <a class="header-anchor" href="#funciones-simuladas" aria-hidden="true">#</a></h1><p>Las funciones simuladas le permiten probar los vínculos entre el código borrando la implementación real de una función, capturando llamadas a la función (y los parámetros pasados en esas llamadas), capturando instancias de funciones de constructor cuando se instancian con nuevas y permitiendo la configuración en tiempo de prueba de valores de retorno.</p><p>Hay dos formas de simular funciones: ya sea creando una función simulada para usar en el código de prueba o escribiendo una simulación manual para anular la dependencia de un módulo. Una explicación más específica de cómo hacer simulaciones manuales la podemos encontrar en la documentación oficial de <a href="https://jestjs.io/docs/manual-mocks" target="_blank" rel="noopener noreferrer">Jest</a>.</p><h2 id="usando-una-funcion-simulada" tabindex="-1">Usando una función simulada <a class="header-anchor" href="#usando-una-funcion-simulada" aria-hidden="true">#</a></h2><p>Imaginemos que estamos probando una implementación de una función <code>forEach</code>, que invoca una devolución de llamada para cada elemento en una matriz proporcionada.</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">items<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">callback</span><span class="token punctuation">(</span>items<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Para probar esta función, podemos usar una función simulada e inspeccionar el estado del simulacro para asegurarnos de que la devolución de llamada se invoque como se esperaba.</p><div class="language-js"><pre><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;using a mock function&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> mockCallback <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token number">42</span> <span class="token operator">+</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> mockCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// The mock function is called twice</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>mockCallback<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// The first argument of the first call to the function was 0</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>mockCallback<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// The first argument of the second call to the function was 1</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>mockCallback<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// The return value of the first call to the function was 42</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>mockCallback<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>results<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="propiedad-mock" tabindex="-1">Propiedad .mock <a class="header-anchor" href="#propiedad-mock" aria-hidden="true">#</a></h2><p>Todas las funciones simuladas tienen esta propiedad especial <code>.mock</code>, que es donde se guardan los datos sobre cómo se llamó a la función y qué devolvió la función. La propiedad <code>.mock</code> también rastrea el valor de esto para cada llamada, por lo que también es posible inspeccionar esto:</p><div class="language-js"><pre><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;exploring a mock property&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> myMock <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">myMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> bound <span class="token operator">=</span> <span class="token function">myMock</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">bound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>myMock<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>instances<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// &gt; [ &lt;a&gt;, &lt;b&gt; ]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Estos miembros simulados son muy útiles en las pruebas para afirmar cómo se llama a estas funciones, se crean instancias o lo que devuelven:</p><div class="language-js"><pre><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;more exploring mock properties&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> myMock <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
    
    <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">myMock</span><span class="token punctuation">(</span><span class="token string">&#39;first arg&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;second arg&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// The function was called exactly once</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>myMock<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// The first arg of the first call to the function was &#39;first arg&#39;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>myMock<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#39;first arg&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// The second arg of the first call to the function was &#39;second arg&#39;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>myMock<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#39;second arg&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// This function was instantiated exactly once</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>myMock<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>instances<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="valores-de-retorno-simulados" tabindex="-1">Valores de Retorno Simulados <a class="header-anchor" href="#valores-de-retorno-simulados" aria-hidden="true">#</a></h2><p>Las funciones simuladas también se pueden usar para inyectar valores de prueba en su código durante una prueba:</p><div class="language-js"><pre><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;mock return value&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> myMock <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    myMock
        <span class="token punctuation">.</span><span class="token function">mockReturnValueOnce</span><span class="token punctuation">(</span><span class="token string">&#39;return value&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">mockReturnValueOnce</span><span class="token punctuation">(</span><span class="token string">&#39;return another value&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">mockReturnValueOnce</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
    
    <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">myMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// The return value of the first call to </span>
    <span class="token comment">// the function was &#39;return value&#39;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>myMock<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>results<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#39;return value&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token function">myMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       
    <span class="token comment">// The return value of the second call to</span>
    <span class="token comment">// the function was &#39;return another value&#39;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>myMock<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>results<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#39;return another value&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// This function was instantiated exactly twice</span>
   <span class="token function">expect</span><span class="token punctuation">(</span>myMock<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>instances<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   
   <span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token function">myMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   c<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;test&#39;</span><span class="token punctuation">;</span>   
   
   <span class="token comment">// The object returned by the first instantiation of this function</span>
   <span class="token comment">// had a `name` property whose value was set to &#39;test&#39;   </span>
   <span class="token comment">// jest ===&gt;&gt;&gt;&gt; expect(myMock.mock.instances[0].name).toEqual(&#39;test&#39;);   </span>
   <span class="token function">expect</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">&#39;test&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Más valores de retorno simulado</p><div class="language-js"><pre><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;more mock return value&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> myMock <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
    <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">myMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>myMock<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>results<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    myMock
        <span class="token punctuation">.</span><span class="token function">mockReturnValueOnce</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">mockReturnValueOnce</span><span class="token punctuation">(</span><span class="token string">&#39;x&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">mockReturnValue</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token function">myMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>myMock<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>results<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token function">myMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>myMock<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>results<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#39;x&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token function">myMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>myMock<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>results<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> e <span class="token operator">=</span> <span class="token function">myMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>myMock<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>results<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Las funciones simuladas también son muy efectivas en el código que usa un estilo funcional de paso de continuación. El código escrito en este estilo ayuda a evitar la necesidad de stubs complicados que recrean el comportamiento del componente real que representan, a favor de inyectar valores directamente en la prueba justo antes de que se usen.</p><div class="language-js"><pre><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;mock filter&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    
    <span class="token keyword">const</span> filterTestFn <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Make the mock return `true` for the first call,</span>
    <span class="token comment">// and `false` for the second call</span>
    filterTestFn<span class="token punctuation">.</span><span class="token function">mockReturnValueOnce</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mockReturnValueOnce</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">num</span> <span class="token operator">=&gt;</span> <span class="token function">filterTestFn</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//console.log(result); // &gt; [11]</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//console.log(filterTestFn.mock.calls[0][0]); // 11</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>filterTestFn<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//console.log(filterTestFn.mock.calls[1][0]); // 12</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>filterTestFn<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>La mayoría de los ejemplos del mundo real en realidad implican obtener una función simulada en un componente dependiente y configurarlo, pero la técnica es la misma. En estos casos, trate de evitar la tentación de implementar la lógica dentro de cualquier función que no se esté probando directamente.</p><h2 id="modulos-simulados" tabindex="-1">Módulos Simulados <a class="header-anchor" href="#modulos-simulados" aria-hidden="true">#</a></h2><p>Supongamos que tenemos una clase que obtiene usuarios de nuestra API. La clase usa axios para llamar a la API y luego devuelve el atributo de datos que contiene a todos los usuarios:</p><p><code>models/Users.js</code></p><div class="language-js"><pre><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Users</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/users.json&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">resp</span> <span class="token operator">=&gt;</span> resp<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Users<span class="token punctuation">;</span>
</code></pre></div><p>Ahora, para probar este método sin tocar la API (y, por lo tanto, crear pruebas lentas y frágiles), podemos usar la función <code>vi.mock(...)</code> para simular automáticamente el módulo axios.</p><p>Una vez que simulamos el módulo, podemos proporcionar un <code>mockResolvedValue</code> para <code>.get</code> que devuelve los datos contra los que queremos que se afirme nuestra prueba. En efecto, estamos diciendo que queremos que <code>axios.get(&#39;/users.json&#39;)</code> devuelva una respuesta falsificada.</p><p><code>users.test.js</code></p><div class="language-js"><pre><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Users <span class="token keyword">from</span> <span class="token string">&#39;@/models/Users&#39;</span><span class="token punctuation">;</span>

<span class="token comment">//vi.mock(&#39;axios&#39;);</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;should fetch users&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Bob&#39;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> resp <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">data</span><span class="token operator">:</span> users<span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">//axios.get.mockResolvedValue(resp);</span>
  axios<span class="token punctuation">.</span>get <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mockResolvedValue</span><span class="token punctuation">(</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// or you could use the following depending on your use case:</span>
  <span class="token comment">// axios.get = vi.fn().mockImplementation(() =&gt; Promise.resolve(resp))</span>

  <span class="token keyword">return</span> Users<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="simulaciones-parciales" tabindex="-1">Simulaciones Parciales <a class="header-anchor" href="#simulaciones-parciales" aria-hidden="true">#</a></h2><p>Los subconjuntos de un módulo se pueden simular y el resto del módulo puede mantener su implementación real:</p><p><code>foo-bar-baz.js</code></p><div class="language-js"><pre><code><span class="token keyword">export</span> <span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token string">&#39;foo&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&#39;bar&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&#39;baz&#39;</span><span class="token punctuation">;</span>
</code></pre></div><p><code>test.js</code></p><div class="language-js"><pre><code><span class="token keyword">import</span> defaultExport<span class="token punctuation">,</span> <span class="token punctuation">{</span>bar<span class="token punctuation">,</span> foo<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/foo-bar-baz&#39;</span><span class="token punctuation">;</span>

vi<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&#39;@/foo-bar-baz&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//const originalModule = jest.requireActual(&#39;../foo-bar-baz&#39;);</span>
  <span class="token keyword">const</span> originalModule <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token function">importActual</span><span class="token punctuation">(</span><span class="token string">&#39;@/foo-bar-baz&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//Mock the default export and named export &#39;foo&#39;</span>
  
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">__esModule</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">//... originalModule,</span>
    <span class="token operator">...</span> <span class="token keyword">await</span> originalModule<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span> vi<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&#39;mocked baz&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">&#39;mocked foo&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;should do a partial mock&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token keyword">const</span> defaultExportResult <span class="token operator">=</span> <span class="token function">defaultExport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>defaultExportResult<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#39;mocked baz&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>defaultExport<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#39;mocked foo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#39;bar&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="implementaciones-simuladas" tabindex="-1">Implementaciones Simuladas <a class="header-anchor" href="#implementaciones-simuladas" aria-hidden="true">#</a></h2><p>Aún así, hay casos en los que es útil ir más allá de la capacidad de especificar valores de retorno y reemplazar completamente la implementación de una función simulada. Esto se puede hacer con <code>vi.fn</code> o el método <code>mockImplementationOnce</code> en funciones simuladas.</p><div class="language-js"><pre><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;mock simulation implementations&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> myMockFn <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">cb</span> <span class="token operator">=&gt;</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  

  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">myMockFn</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>El método <code>mockImplementation</code> es útil cuando necesita definir la implementación predeterminada de una función simulada que se crea a partir de otro módulo:</p><p><code>foo.js</code></p><div class="language-js"><pre><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// some implementation;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><code>test.js</code></p><div class="language-js"><pre><code><span class="token keyword">import</span> foo <span class="token keyword">from</span> <span class="token string">&#39;@/foo&#39;</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;foo is a mock function&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  vi<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&#39;@/foo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// this happens automatically with automocking    </span>

  <span class="token comment">// foo is a mock function</span>
  foo<span class="token punctuation">.</span><span class="token function">mockImplementation</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Cuando necesite recrear un comportamiento complejo de una función simulada de modo que varias llamadas a funciones produzcan resultados diferentes, use el método <code>mockImplementationOnce</code>:</p><div class="language-js"><pre><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;mock implementation once&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> myMockFn <span class="token operator">=</span> vi
    <span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">mockImplementationOnce</span><span class="token punctuation">(</span><span class="token parameter">cb</span> <span class="token operator">=&gt;</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">mockImplementationOnce</span><span class="token punctuation">(</span><span class="token parameter">cb</span> <span class="token operator">=&gt;</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">myMockFn</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">myMockFn</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Cuando la función simulada se queda sin implementaciones definidas con <code>mockImplementationOnce</code>, ejecutará la implementación predeterminada establecida con <code>vi.fn</code> (si está definida):</p><div class="language-js"><pre><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;mocked function it will execute the default&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> myMockFn <span class="token operator">=</span> vi
      <span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&#39;default&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">mockImplementationOnce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&#39;first call&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">mockImplementationOnce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&#39;second call&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">myMockFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#39;first call&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">myMockFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#39;second call&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">myMockFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#39;default&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">myMockFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#39;default&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Para los casos en los que tenemos métodos que normalmente están encadenados (y, por lo tanto, siempre necesitamos devolver <code>this</code>), tenemos una API azucarada para simplificar esto en forma de una función <code>.mockReturnThis()</code> que también se encuentra en todos las simulaciones:</p><div class="language-js"><pre><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;mock return this&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> myObj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">myMethod</span><span class="token operator">:</span> vi<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mockReturnThis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// is the same as</span>

  <span class="token keyword">const</span> otherObj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">myMethod</span><span class="token operator">:</span> vi<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>myObj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>otherObj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="nombres-simulados" tabindex="-1">Nombres Simulados <a class="header-anchor" href="#nombres-simulados" aria-hidden="true">#</a></h2><p>Opcionalmente, puede proporcionar un nombre para sus funciones simuladas, que se mostrarán en lugar de &quot;vi.fn()&quot; en la salida de error de prueba. Use esto si desea poder identificar rápidamente la función simulada que informa un error en su salida de prueba.</p><div class="language-js"><pre><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;make fun of names&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> myMockFn <span class="token operator">=</span> vi
    <span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">mockReturnValue</span><span class="token punctuation">(</span><span class="token string">&#39;default&#39;</span><span class="token punctuation">)</span>
    <span class="token comment">//.mockImplementation(scalar =&gt; 42 + scalar)</span>
    <span class="token punctuation">.</span><span class="token function">mockImplementationOnce</span><span class="token punctuation">(</span><span class="token parameter">scalar</span> <span class="token operator">=&gt;</span> <span class="token number">42</span> <span class="token operator">+</span> scalar<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">mockName</span><span class="token punctuation">(</span><span class="token string">&#39;add42&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token function">myMockFn</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
  <span class="token function">expect</span><span class="token punctuation">(</span>myMockFn<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>results<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">44</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>myMockFn<span class="token punctuation">.</span><span class="token function">getMockName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#39;add42&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
  <span class="token function">myMockFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
  <span class="token function">expect</span><span class="token punctuation">(</span>myMockFn<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>results<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>myMockFn<span class="token punctuation">.</span><span class="token function">getMockName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#39;add42&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="comparadores-personalizados" tabindex="-1">Comparadores Personalizados <a class="header-anchor" href="#comparadores-personalizados" aria-hidden="true">#</a></h2><p>Finalmente, para que sea menos exigente afirmar cómo se han llamado las funciones simuladas, se han agregado algunas funciones de comparación personalizadas:</p><div class="language-js"><pre><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;custom matcher functions&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> mockFunc <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  

  <span class="token function">mockFunc</span><span class="token punctuation">(</span><span class="token string">&quot;arg1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;arg2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>mockFunc<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// The mock function was called at least once with the specified args</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>mockFunc<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledWith</span><span class="token punctuation">(</span><span class="token string">&quot;arg1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;arg2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token function">mockFunc</span><span class="token punctuation">(</span><span class="token string">&quot;arg3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;arg4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// The last call to the mock function was called with the specified args</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>mockFunc<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenLastCalledWith</span><span class="token punctuation">(</span><span class="token string">&quot;arg3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;arg4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// All calls and the name of the mock is written as a snapshot </span>
  <span class="token comment">//expect(mockFunc).toMatchSnapshot();</span>
    <span class="token comment">/*Snapshots  1 obsolete
            ↳ test/commonMatchers.test.js
              · mock simulation implementations 1*/</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Estos comparadores son azúcar para las formas comunes de inspeccionar la propiedad <code>.mock</code>. Siempre puede hacerlo manualmente usted mismo si le gusta más o si necesita hacer algo más específico:</p><div class="language-js"><pre><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;do this manually whithout sugar&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> mockFunc <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mockName</span><span class="token punctuation">(</span><span class="token string">&#39;a mock name&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  

  <span class="token function">mockFunc</span><span class="token punctuation">(</span><span class="token string">&quot;arg1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;arg2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// The mock function was called at least once</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>mockFunc<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeGreaterThan</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// The mock function was called at least once with the specified args</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>mockFunc<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContainEqual</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;arg1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;arg2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">mockFunc</span><span class="token punctuation">(</span><span class="token string">&quot;arg3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;arg4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// The last call to the mock function was called with the specified args</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>mockFunc<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">[</span>mockFunc<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;arg3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;arg4&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// The first arg of the last call to the mock function was `42`</span>
  <span class="token comment">// (note that there is no sugar helper for this specific of an assertion)</span>
  <span class="token function">mockFunc</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>mockFunc<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">[</span>mockFunc<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// A snapshot will check that a mock was invoked the same number of times,</span>
  <span class="token comment">// in the same order, with the same arguments. También afirmará en el nombre.</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>mockFunc<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>mockFunc<span class="token punctuation">.</span><span class="token function">getMockName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#39;a mock name&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Para obtener una lista completa de comparadores, consulte los <a href="https://vitest.dev/api/" target="_blank" rel="noopener noreferrer">documentos de referencia</a>.</p></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-07c132fc><div class="edit" data-v-07c132fc><div class="edit-link" data-v-07c132fc data-v-1ed99556><!----></div></div><div class="updated" data-v-07c132fc><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/vue-tdd/vitest/configuracion-y-desmontaje" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>Configuración y Desmontaje</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/vue-tdd/vitest/un-ejemplo-asincrono" data-v-38ede35f><span class="text" data-v-38ede35f>Un Ejemplo Asíncrono</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"comenzar_pruebas-unitarias.md\":\"cbd63b8c\",\"comenzar_tdd.md\":\"18a9cb2c\",\"index.md\":\"91a21c92\",\"pinia_probando-pinia.md\":\"f2247a82\",\"vitest_configuracion-y-desmontaje.md\":\"82901114\",\"vitest_entorno-de-prueba.md\":\"b542f97e\",\"vitest_funciones-simuladas.md\":\"64860787\",\"vitest_porque-vitest.md\":\"8617e29e\",\"vitest_probando-codigo-asincrono.md\":\"7f6375f6\",\"vitest_simulaciones-de-temporizador.md\":\"c5e3e67f\",\"vitest_un-ejemplo-asincrono.md\":\"fe31107f\",\"vitest_usando-comparadores.md\":\"b26006cb\",\"vth_api-de-composicion.md\":\"47940239\",\"vth_encontrando-elementos-y-componentes.md\":\"826adb5d\",\"vth_probando-eventos-emitidos.md\":\"e3210b92\",\"vth_probando-propiedades.md\":\"f03c86c9\",\"vth_probando-vuex-en-componentes-mutaciones-y-acciones.md\":\"442faf0b\",\"vth_probando-vuex-en-componentes.md\":\"aab9da48\",\"vth_probando-vuex.md\":\"0cca07ae\",\"vth_propiedades-calculadas.md\":\"7ab63409\",\"vth_reduciendo-repetitividad-en-las-pruebas.md\":\"f22f6a1c\",\"vth_renderizar-componentes.md\":\"5a8a8d94\",\"vth_simulando-la-entrada-del-usuario.md\":\"ab1ff067\",\"vth_simulando-objetos-globales.md\":\"91599344\",\"vth_talonando-componentes.md\":\"58059312\",\"vth_vue-router.md\":\"89f3c3a8\",\"vth_vuex-acciones.md\":\"1984dcde\",\"vth_vuex-captadores.md\":\"da95b77b\",\"vth_vuex-mutaciones.md\":\"025d1db0\",\"vtl_ddp_intro.md\":\"1eda26c7\",\"vtl_ddp_patrones-para-probar-accesorios.md\":\"6001d4f2\",\"vtl_documentacion_ejemplos.md\":\"a98d4f37\",\"vtl_documentacion_guias-de-principios.md\":\"05f0a862\",\"vtl_documentacion_intro-v.md\":\"8d29a83f\",\"vtl_documentacion_intro.md\":\"e62f0634\",\"vtu_esencial_entorno-de-prueba.md\":\"38dcb8da\",\"vtu_esencial_escribir-componentes-que-sean faciles-de-probar.md\":\"10c18a4c\",\"vtu_esencial_formularios.md\":\"4dbe5e31\",\"vtu_esencial_intro.md\":\"c3dd88c1\",\"vtu_esencial_manejo-de-eventos.md\":\"aa8a62e2\",\"vtu_esencial_pasando-datos-a-componentes.md\":\"c6f04aa5\",\"vtu_esencial_renderizado-condicional.md\":\"13f0ef0a\",\"vtu_esencial_un-curso-acelerado.md\":\"b3dc4f6f\",\"vtu_vue-test-utils-en-profundidad_comportamiento-asincrono.md\":\"a43b63a0\",\"vtu_vue-test-utils-en-profundidad_instancia-de-componente.md\":\"d47e219c\",\"vtu_vue-test-utils-en-profundidad_probando-teleport.md\":\"c393f91c\",\"vtu_vue-test-utils-en-profundidad_probando-vue-router.md\":\"b5fd7a35\",\"vtu_vue-test-utils-en-profundidad_probando-vuex.md\":\"55482ade\",\"vtu_vue-test-utils-en-profundidad_ranuras.md\":\"bf589628\",\"vtu_vue-test-utils-en-profundidad_reusabilidad-y-composicion.md\":\"82eb6215\",\"vtu_vue-test-utils-en-profundidad_solicitudes-http.md\":\"045eee9f\",\"vtu_vue-test-utils-en-profundidad_talones-y-montaje-superficial.md\":\"760fa187\",\"vtu_vue-test-utils-en-profundidad_transiciones.md\":\"cbc6b72b\",\"vtu_vue-test-utils-en-profundidad_un-poco-mas-sobre-vuex.md\":\"3bb6f727\"}")</script>
    <script type="module" async src="/vue-tdd/assets/app.bbdf5da0.js"></script>
    
  </body>
</html>